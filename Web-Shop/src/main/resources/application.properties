# ============================================================================
# Perfect8 Web Shop Service Configuration
# ============================================================================

# Server Configuration
server.port=8082
server.servlet.context-path=/api/shop

# Application Information
spring.application.name=perfect8-webshop-service
app.name=Perfect8 Web Shop Service
app.version=1.0.0
app.description=E-commerce service for Perfect8 platform

# ============================================================================
# Database Configuration
# ============================================================================

# MySQL Configuration (Default)
#spring.datasource.url=jdbc:mysql://localhost:3306/perfect8_shop?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true
#spring.datasource.username=${MYSQL_USER:perfect8_user}
#spring.datasource.password=${MYSQL_PASSWORD:changeme}
#spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection Pool Configuration (HikariCP)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.leak-detection-threshold=60000

# ============================================================================
# JPA/Hibernate Configuration
# ============================================================================

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.show-sql=false
spring.jpa.open-in-view=false

# Hibernate Properties
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=false
spring.jpa.properties.hibernate.jdbc.batch_size=20

# ============================================================================
# JSON Configuration
# ============================================================================

# Jackson Configuration
spring.jackson.default-property-inclusion=non_null
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.time-zone=UTC

# ============================================================================
# Security Configuration
# ============================================================================

# JWT Configuration
security.jwt.secret=${JWT_SECRET:perfect8-super-secret-jwt-key-for-development-only-change-in-production}
security.jwt.expiration=86400000

# ============================================================================
# PayPal Configuration
# ============================================================================

# PayPal Settings
paypal.client-id=${PAYPAL_CLIENT_ID:your-paypal-client-id}
paypal.client-secret=${PAYPAL_CLIENT_SECRET:your-paypal-client-secret}
paypal.mode=${PAYPAL_MODE:sandbox}

# ============================================================================
# Email Configuration
# ============================================================================

# Email Settings for Order Notifications
spring.mail.host=${EMAIL_HOST:smtp.gmail.com}
spring.mail.port=${EMAIL_PORT:587}
spring.mail.username=${EMAIL_USERNAME:your-email@gmail.com}
spring.mail.password=${EMAIL_PASSWORD:your-app-password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ============================================================================
# Actuator Configuration
# ============================================================================

# Management Endpoints
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized

# ============================================================================
# Logging Configuration
# ============================================================================

# Logging Levels
logging.level.com.perfect8.shop=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type=TRACE

# Logging Patterns
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ============================================================================
# CORS Configuration
# ============================================================================

# CORS Settings
app.cors.allowed-origins=http://localhost:3000,http://localhost:8080,http://localhost:8081
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# ============================================================================
# File Upload Configuration
# ============================================================================

# File Upload Settings
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
app.upload.upload-dir=${UPLOAD_DIR:./uploads}

# ============================================================================
# Profile-Specific Configurations
# ============================================================================

# The following configurations are loaded based on active profiles
# Use: mvn spring-boot:run -Dspring-boot.run.profiles=dev|test|prod

# Lägg till dessa rader överst i application.properties
# H2 Database (fallback för snabb start)
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.h2.console.enabled=true