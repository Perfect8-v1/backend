# Perfect8 Image Service Configuration
# Version 1.0 - Complete configuration
# Updated: 2025-09-19

# ============================================
# SERVER CONFIGURATION
# ============================================
server.port=8084
spring.application.name=image-service
server.servlet.context-path=/api/image

# ============================================
# DATABASE CONFIGURATION
# ============================================
spring.datasource.url=jdbc:mysql://localhost:3306/perfect8_images?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ============================================
# JPA/HIBERNATE CONFIGURATION
# ============================================
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# Hibernate Performance (Basic for v1.0)
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ============================================
# CONNECTION POOL (HIKARICP)
# ============================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
# Maximum file sizes
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true

# ============================================
# IMAGE SERVICE CONFIGURATION
# ============================================
# Storage settings
image.upload.directory=uploads/images
image.base.url=http://localhost:8084/api/image/files
image.max.size.bytes=10485760
image.allowed.formats=jpg,jpeg,png,webp,bmp

# Image processing settings
image.processing.timeout.minutes=10
image.cleanup.days.old=30

# Image sizes (pixels)
image.thumbnail.width=150
image.thumbnail.height=150
image.small.width=400
image.small.height=400
image.medium.width=800
image.medium.height=800
image.large.width=1600
image.large.height=1600

# Thumbnailator settings
image.output.quality=0.90
image.output.format=ORIGINAL

# Watermark settings (disabled for v1.0)
image.watermark.enabled=false
image.watermark.path=uploads/watermark.png

# ============================================
# JWT CONFIGURATION
# ============================================
# Must match admin-service JWT secret
jwt.secret=ThisIsAVeryLongSecretKeyForJWTTokenGenerationPerfect8SystemVersion1Point0
jwt.expiration=86400000

# ============================================
# SECURITY CONFIGURATION
# ============================================
spring.security.user.name=admin
spring.security.user.password=admin123

# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.root=INFO
logging.level.com.perfect8.image=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.file.name=logs/image-service.log

# ============================================
# ACTUATOR CONFIGURATION
# ============================================
# Basic health check for v1.0
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.server.port=9084

# ============================================
# CORS CONFIGURATION
# ============================================
cors.allowed.origins=http://localhost:3000,http://localhost:4200,http://localhost:5173
cors.allowed.methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed.headers=*
cors.allow.credentials=true

# ============================================
# STATIC RESOURCE HANDLING
# ============================================
# Serve uploaded images as static resources
spring.mvc.static-path-pattern=/files/**
spring.web.resources.static-locations=file:uploads/images/

# ============================================
# JACKSON/JSON CONFIGURATION
# ============================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.serialization.fail-on-empty-beans=false

# ============================================
# ERROR HANDLING
# ============================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param

# ============================================
# STORAGE TYPE
# ============================================
# v1.0 = local, v2.0 = s3
storage.type=local

# Future S3 configuration (commented for v1.0)
# storage.s3.bucket=perfect8-images
# storage.s3.region=eu-north-1
# storage.s3.access-key=${AWS_ACCESS_KEY}
# storage.s3.secret-key=${AWS_SECRET_KEY}

# ============================================
# CACHE CONFIGURATION
# ============================================
# Simple cache for v1.0
spring.cache.type=simple

# ============================================
# SCHEDULED TASKS
# ============================================
# Run cleanup daily at 2 AM
cleanup.schedule.cron=0 0 2 * * ?
cleanup.enabled=true

# ============================================
# ACTIVE PROFILE
# ============================================
spring.profiles.active=dev

# ============================================
# VERSION 2.0 FEATURES (DISABLED)
# ============================================
# These are disabled for v1.0
metrics.enabled=false
analytics.tracking.enabled=false
image.optimization.enabled=false
cdn.enabled=false
image.ai.tagging.enabled=false
image.compression.advanced=false